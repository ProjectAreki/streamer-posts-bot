# 📚 Обучение AI на существующих постах

## Как это работает

### 1️⃣ Загрузка постов

AI загружает твои 500 готовых постов из JSON файла и использует их как **обучающую базу**.

### 2️⃣ Что AI анализирует в твоих постах:

#### 📝 Стиль и структура:
- Длина постов (средняя, минимальная, максимальная)
- Использование эмодзи (какие, где, сколько)
- Разделители (—•—, ~~~, ◈◈◈)
- Форматирование (жирный, курсив, code)

#### 🎨 Тон и подача:
- Эмоциональность (🔥💥🚀 vs спокойный тон)
- Обращение (вопросы, восклицания, утверждения)
- Сленг и жаргон ("занос", "кручу", "залетел")

#### 🔗 Работа со ссылками:
- Где размещаются (начало/середина/конец)
- Как описываются бонусы
- Форматы (гиперссылки, plain URL, текст+URL)

#### 💬 Уникальные фишки:
- Повторяющиеся фразы ("огонь", "мощно", "красавчик")
- Метафоры и сравнения
- Структура историй (завязка-кульминация-призыв)

---

## 3️⃣ Процесс обучения (каждый пост):

```
┌─────────────────────────────────────────┐
│  1. AI получает промпт с инструкциями   │
└─────────────────────────────────────────┘
                  ↓
┌─────────────────────────────────────────┐
│  2. Добавляются 3 случайных примера     │
│     из твоих 500 постов:                │
│                                         │
│  "📚 ПРИМЕРЫ ТВОИХ ПОСТОВ:"              │
│  ПРИМЕР 1: [твой пост 1]                │
│  ПРИМЕР 2: [твой пост 2]                │
│  ПРИМЕР 3: [твой пост 3]                │
│                                         │
│  ⚠️ Изучи структуру, тон, стиль!        │
│  НО делай НОВЫЙ пост - НЕ копируй!      │
└─────────────────────────────────────────┘
                  ↓
┌─────────────────────────────────────────┐
│  3. AI анализирует примеры:             │
│  - Какая длина постов?                  │
│  - Какие эмодзи используются?           │
│  - Как описываются выигрыши?            │
│  - Где стоят ссылки?                    │
└─────────────────────────────────────────┘
                  ↓
┌─────────────────────────────────────────┐
│  4. AI создает НОВЫЙ пост:              │
│  - В том же СТИЛЕ                       │
│  - С той же СТРУКТУРОЙ                  │
│  - Но с ДРУГИМИ словами/фразами         │
│  - С НОВЫМИ метафорами                  │
└─────────────────────────────────────────┘
```

---

## 4️⃣ Проверка уникальности с БД:

После генерации 100 новых постов, AI проверяет их против твоих 500 существующих:

```
┌─────────────────────────────────────────┐
│  Новые 100 постов                       │
└─────────────────────────────────────────┘
                  +
┌─────────────────────────────────────────┐
│  Существующие 500 постов (10 случайных) │
└─────────────────────────────────────────┘
                  ↓
┌─────────────────────────────────────────┐
│  AI проверяет:                          │
│  ✓ Нет одинаковых начал?                │
│  ✓ Нет повторяющихся фраз?              │
│  ✓ Нет одинаковых структур?             │
│  ✓ Нет похожих эмодзи-паттернов?        │
└─────────────────────────────────────────┘
                  ↓
┌─────────────────────────────────────────┐
│  Результат:                             │
│  "95 уникальных, 5 похожих на старые"   │
│  → Регенерировать 5 постов              │
└─────────────────────────────────────────┘
```

---

## 5️⃣ Пример как AI учится:

### Твой пост (из базы):
```
🎰 Manik превратил 40₽ в 895 692₽!
Fire Hopper — это прыжок в неизвестность.
Одна ставка x25 591.2!

👉 https://cutt.ly/bonus1 — 100к + 100 FS
```

### AI видит паттерны:
- ✅ Начало с эмодзи + ник + сумма
- ✅ Описание слота как метафора ("прыжок в неизвестность")
- ✅ Множитель в конце строки
- ✅ Ссылка с эмодзи 👉
- ✅ Короткий пост (~300 символов)

### AI создает НОВЫЙ пост:
```
💎 Buratino разогнал 500₽ до 1.2 млн!
Sugar Rush — это сладкий взрыв эмоций.
Результат x2400 говорит сам за себя.

👉 https://cutt.ly/bonus1 — 150% + 200 FS
```

**Что сохранилось:**
- ✅ Стиль (краткость, метафора, эмоции)
- ✅ Структура (ник → описание → множитель → ссылка)
- ✅ Тон (энергичный, восклицания)

**Что изменилось:**
- ✅ Другой стример (Buratino вместо Manik)
- ✅ Другие суммы и множитель
- ✅ Другая метафора ("сладкий взрыв" вместо "прыжок")
- ✅ Новые фразы (нет копирования)

---

## 6️⃣ Использование в коде:

```python
from src.ai_post_generator import AIPostGenerator

# Инициализация
generator = AIPostGenerator(
    openrouter_api_key="sk-or-...",
    model="deepseek/deepseek-chat",
    use_openrouter=True
)

# Загрузка твоих 500 постов
generator.load_existing_posts_from_file("data/my_posts.json")
# ✅ Загружено 500 существующих постов для обучения AI

# Генерация новых постов
posts = await generator.generate_all_posts(videos, images)

# Проверка уникальности (включая твои 500 постов)
result = await generator.check_posts_uniqueness(posts, slots)
# AI проверит новые посты против твоих 500!
```

---

## 7️⃣ Формат JSON файла:

### Вариант 1: Простой массив (только текст)
```json
[
  "пост 1...",
  "пост 2...",
  "пост 3..."
]
```

### Вариант 2: С метаданными (рекомендуется)
```json
{
  "posts": [
    {
      "text": "пост 1...",
      "date": "2025-01-15",
      "slot": "Fire Hopper",
      "streamer": "Manik"
    }
  ]
}
```

---

## 8️⃣ Преимущества обучения на БД:

| Без БД | С БД (500 постов) |
|--------|-------------------|
| AI придумывает стиль сам | AI копирует ТВОЙ стиль |
| Может быть слишком формально | Пишет как ТЫ |
| Может повторяться | Проверка против 500 постов |
| Нет референса | 3 примера в каждом промпте |
| ❌ Риск самоплагиата | ✅ Избегает повторов |

---

## 🎯 Итог:

1. **AI учится на твоих постах** — копирует стиль, структуру, тон
2. **НЕ копирует напрямую** — создает новые уникальные тексты
3. **Проверяет уникальность** — сравнивает с твоими 500 постами
4. **Результат:** Новые посты выглядят как твои, но 100% уникальны
